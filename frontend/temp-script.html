<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Planet Fitness Resource Hub - Dashboard</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            /* Planet Fitness Colors */
            --pf-dark-purple: #290241;
            --pf-bright-purple: #9600FA;
            --pf-light-purple: #FAEEFF;
            --pf-yellow: #FFDC00;
            --pf-white: #FFFFFF;
            
            /* Typography */
            --font-sans: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Helvetica Neue', Arial, sans-serif;
        }

        body {
            font-family: var(--font-sans);
            background: #F9FAFB;
            min-height: 100vh;
            padding-bottom: 140px;
        }

        /* Header */
        header {
            background: white;
            border-bottom: 1px solid #E5E7EB;
            padding: 20px 0;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 24px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 20px;
        }

        .logo-section {
            display: flex;
            align-items: center;
            gap: 24px;
        }

        .logo-section img {
            height: 100px;
            max-width: 200px;
            object-fit: contain;
        }

        .logo-divider {
            width: 1px;
            height: 40px;
            background: #E5E7EB;
        }

        .tagline {
            color: #6B7280;
            font-size: 13px;
            margin-top: 4px;
            font-weight: 400;
        }

        /* Navigation */
        nav {
            background: white;
            border-bottom: 2px solid var(--pf-light-purple);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .nav-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 24px;
            display: flex;
            gap: 40px;
            overflow-x: auto;
        }

        .nav-link {
            padding: 16px 8px;
            color: #6B7280;
            text-decoration: none;
            font-weight: 600;
            font-size: 15px;
            border-bottom: 3px solid transparent;
            transition: all 0.2s ease;
            white-space: nowrap;
        }

        .nav-link:hover {
            color: var(--pf-bright-purple);
            border-bottom-color: var(--pf-bright-purple);
        }

        .nav-link.active {
            color: var(--pf-bright-purple);
            border-bottom-color: var(--pf-bright-purple);
        }

        /* Main Content */
        main {
            max-width: 1000px;
            margin: 60px auto;
            padding: 0 24px;
        }

        /* Welcome Section */
        .welcome-section {
            background: white;
            border-radius: 16px;
            padding: 48px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            text-align: center;
            margin-bottom: 40px;
        }

        .welcome-icon {
            font-size: 64px;
            margin-bottom: 24px;
            position: relative;
            display: inline-block;
        }

        h1 {
            color: var(--pf-dark-purple);
            font-size: 36px;
            font-weight: 700;
            margin-bottom: 16px;
            line-height: 1.2;
        }

        .subtitle {
            color: #6B7280;
            font-size: 18px;
            line-height: 1.6;
            margin-bottom: 40px;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        /* Question Cards Grid */
        .question-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 24px;
            margin-top: 32px;
        }

        .question-card {
            background: white;
            border: 2px solid #E5E7EB;
            border-radius: 16px;
            padding: 32px 24px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
        }

        .question-card:hover {
            border-color: var(--pf-bright-purple);
            transform: translateY(-4px);
            box-shadow: 0 8px 24px rgba(150, 0, 250, 0.15);
        }

        .question-icon {
            font-size: 48px;
            margin-bottom: 20px;
        }

        .question-title {
            color: var(--pf-dark-purple);
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 12px;
        }

        .question-desc {
            color: #6B7280;
            font-size: 14px;
            line-height: 1.5;
        }

        /* Search Bar (Bottom Fixed) */
        .search-container {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            border-top: 1px solid #E5E7EB;
            box-shadow: 0 -4px 12px rgba(0, 0, 0, 0.05);
            padding: 20px 0;
            z-index: 50;
        }

        .search-content {
            max-width: 1000px;
            margin: 0 auto;
            padding: 0 24px;
        }

        .search-label {
            color: var(--pf-dark-purple);
            font-weight: 600;
            font-size: 15px;
            margin-bottom: 12px;
            display: block;
        }

        .search-box {
            display: flex;
            gap: 12px;
            align-items: center;
        }

        .search-input {
            flex: 1;
            padding: 14px 20px;
            border: 2px solid #E5E7EB;
            border-radius: 12px;
            font-size: 15px;
            font-family: var(--font-sans);
            transition: all 0.3s ease;
        }

        .search-input:focus {
            outline: none;
            border-color: var(--pf-bright-purple);
            box-shadow: 0 0 0 4px rgba(150, 0, 250, 0.1);
        }

        .search-btn {
            padding: 14px 32px;
            background: var(--pf-bright-purple);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 15px;
            font-weight: 600;
            font-family: var(--font-sans);
            cursor: pointer;
            transition: all 0.3s ease;
            white-space: nowrap;
        }

        .search-btn:hover {
            background: var(--pf-dark-purple);
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(41, 2, 65, 0.3);
        }

        /* User Menu */
        .user-menu {
            display: flex;
            align-items: center;
            gap: 12px;
            color: #6B7280;
            font-size: 14px;
        }

        .user-avatar {
            width: 36px;
            height: 36px;
            background: var(--pf-bright-purple);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
        }

        .logout-btn {
            padding: 8px 16px;
            background: transparent;
            border: 1px solid #E5E7EB;
            border-radius: 8px;
            color: #6B7280;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .logout-btn:hover {
            background: #F9FAFB;
            border-color: #D1D5DB;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                align-items: flex-start;
            }

            .logo-section {
                flex-direction: column;
                gap: 12px;
            }

            .logo-divider {
                display: none;
            }

            h1 {
                font-size: 28px;
            }

            .welcome-section {
                padding: 32px 24px;
            }

            .question-cards {
                grid-template-columns: 1fr;
            }

            .search-box {
                flex-direction: column;
            }

            .search-btn {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="header-content">
            <div class="logo-section">
                <div>
                    <img src="images/Logo-Primary.svg" alt="Planet Fitness" style="height: 100px;">
                </div>
                <div class="logo-divider"></div>
                <div>
                    <img src="images/ses-logo.png" alt="Save Energy Systems">
                    <p class="tagline">AI-driven energy and facility management systems</p>
                </div>
            </div>

            <div class="user-menu">
                <div class="user-avatar" id="userAvatar"></div>
                <span id="userEmail"></span>
                <button class="logout-btn" onclick="logout()">Logout</button>
            </div>
        </div>
    </header>

    <!-- Navigation -->
    <nav>
        <div class="nav-content">
            <a href="dashboard.html" class="nav-link active">üè† Dashboard</a>
            <a href="help-now.html" class="nav-link">üö® Help Now</a>
            <a href="order-parts.html" class="nav-link">üì¶ Order Parts</a>
            <a href="resources.html" class="nav-link">üìö Resources</a>
            <a href="why-ses.html" class="nav-link">üí° Why SES</a>
        </div>
    </nav>

    <!-- Main Content -->
    <main>
        <!-- Welcome Section -->
        <div class="welcome-section">
            <div class="welcome-icon">
                <i class="bi bi-person-circle" style="color: var(--pf-bright-purple); position: relative; display: inline-block;"></i>
                <i class="bi bi-lightning-charge-fill" style="color: var(--pf-yellow); position: absolute; bottom: -5px; right: -10px; font-size: 0.5em;"></i>
            </div>
            <h1>Welcome to Planet Fitness & Save Energy Systems Resource Hub</h1>
            <p class="subtitle">
                Hi, I'm <strong>Steph</strong>‚Äîyour AI assistant for all things HVAC and SES services. 
                I'm here to help you troubleshoot HVAC issues, order parts, access emergency protocols, 
                and get quick answers so you can keep your facility running smoothly. 
                Whether it's a heating issue, parts ordering, or seasonal maintenance, I've got you covered. 
                Ask me anything or choose a topic below!
            </p>
        </div>

        <!-- Question Cards -->
        <div class="question-cards">
            <div class="question-card" onclick="askQuestion('How do I troubleshoot my HVAC system?')">
                <div class="question-icon"><i class="bi bi-snow" style="color: var(--pf-bright-purple);"></i></div>
                <div class="question-title">HVAC Troubleshooting</div>
                <div class="question-desc">Get help with heating, cooling, and air quality issues</div>
            </div>

            <div class="question-card" onclick="askQuestion('How do I order parts for my location?')">
                <div class="question-icon"><i class="bi bi-box-seam" style="color: var(--pf-bright-purple);"></i></div>
                <div class="question-title">Order Parts</div>
                <div class="question-desc">Learn how to order filters, supplies, and equipment</div>
            </div>

            <div class="question-card" onclick="askQuestion('What are the emergency contact protocols?')">
                <div class="question-icon"><i class="bi bi-exclamation-triangle" style="color: #DC2626;"></i></div>
                <div class="question-title">Emergency Protocols</div>
                <div class="question-desc">Access emergency contacts and urgent procedures</div>
            </div>

            <div class="question-card" onclick="askQuestion('How do I submit a work order?')">
                <div class="question-icon"><i class="bi bi-tools" style="color: var(--pf-bright-purple);"></i></div>
                <div class="question-title">Submit Work Order</div>
                <div class="question-desc">Steps to request maintenance or repairs</div>
            </div>

            <div class="question-card" onclick="askQuestion('What are the winter maintenance procedures?')">
                <div class="question-icon"><i class="bi bi-calendar-check" style="color: var(--pf-bright-purple);"></i></div>
                <div class="question-title">Seasonal Maintenance</div>
                <div class="question-desc">Winterization, snow removal, and seasonal tasks</div>
            </div>

            <div class="question-card" onclick="askQuestion('How do I contact billing support?')">
                <div class="question-icon"><i class="bi bi-currency-dollar" style="color: var(--pf-bright-purple);"></i></div>
                <div class="question-title">Billing Questions</div>
                <div class="question-desc">Get help with invoices and payment questions</div>
            </div>
        </div>
    </main>

    <!-- Search Bar (Fixed Bottom) -->
    <div class="search-container">
        <div class="search-content">
            <label class="search-label">
                <span style="position: relative; display: inline-block; margin-right: 4px;">
                    <i class="bi bi-person-circle"></i>
                    <i class="bi bi-lightning-charge-fill" style="position: absolute; bottom: -3px; right: -8px; font-size: 0.6em; color: var(--pf-yellow);"></i>
                </span>
                Ask Steph anything:
            </label>
            <div class="search-box">
                <input 
                    type="text" 
                    class="search-input" 
                    id="searchInput"
                    placeholder="e.g., 'My HVAC isn't working' or 'How do I order filters?'"
                    onkeypress="handleKeyPress(event)"
                >
                <button class="search-btn" onclick="handleSearch()">Send</button>
            </div>
        </div>
    </div>

    <script>
        // Load user data from session
        window.addEventListener('load', () => {
            // Check for authentication
            const authToken = sessionStorage.getItem('auth_token') || localStorage.getItem('auth_token');
            const userDataStr = sessionStorage.getItem('user_data') || localStorage.getItem('user_data');
            
            // If no auth token, redirect to login
            if (!authToken || !userDataStr) {
                window.location.href = 'index.html';
                return;
            }

            // Parse user data
            try {
                const userData = JSON.parse(userDataStr);
                const email = userData.email || userData.username || 'User';
                
                document.getElementById('userEmail').textContent = email;
                const initial = email.charAt(0).toUpperCase();
                document.getElementById('userAvatar').textContent = initial;
            } catch (e) {
                console.error('Error parsing user data:', e);
                window.location.href = 'index.html';
            }
        });

        // Handle search
        function handleSearch() {
            const input = document.getElementById('searchInput');
            const query = input.value.trim();

            if (!query) return;

            console.log('Searching for:', query);
            
            // TODO: Implement real AI search
            alert(`AI Search will process: "${query}"\n\nThis will be connected to the GuideFlowAI backend in Phase 2.`);
            
            input.value = '';
        }

        // Handle Enter key
        function handleKeyPress(event) {
            if (event.key === 'Enter') {
                handleSearch();
            }
        }

        // Handle question card click
        function askQuestion(question) {
            document.getElementById('searchInput').value = question;
            document.getElementById('searchInput').focus();
            
            // Optional: Auto-submit the question
            // handleSearch();
        }

        // Logout
        function logout() {
            // Clear all session data
            sessionStorage.removeItem('auth_token');
            sessionStorage.removeItem('user_data');
            localStorage.removeItem('auth_token');
            localStorage.removeItem('user_data');
            localStorage.removeItem('demo_mode');
            
            // Redirect to login
            window.location.href = 'index.html';
        }
    </script>
</body>
</html>
